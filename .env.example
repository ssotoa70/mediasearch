# MediaSearch Configuration
# Copy this to .env and fill in your values

# =============================================================================
# Backend Selection
# =============================================================================
# Set to 'vast' for production (VAST DataBase + DataEngine)
# Set to 'local' for development (PostgreSQL + Redis + MinIO)
BACKEND=local

# =============================================================================
# VAST Configuration (when BACKEND=vast)
# =============================================================================
# VAST cluster endpoint
VAST_ENDPOINT=http://your-vast-cluster:8070

# VAST S3 endpoint
VAST_S3_ENDPOINT=http://your-vast-cluster:80

# S3 credentials (create via VAST Web UI)
VAST_ACCESS_KEY_ID=your-access-key
VAST_SECRET_ACCESS_KEY=your-secret-key

# VAST Database bucket (created via VAST Web UI)
VAST_DATABASE_BUCKET=mediasearch-db

# VAST Database schema
VAST_DATABASE_SCHEMA=mediasearch

# VAST region
VAST_REGION=us-east-1

# =============================================================================
# Local Development Configuration (when BACKEND=local)
# =============================================================================
# PostgreSQL (local stand-in for VAST DataBase)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=mediasearch
POSTGRES_USER=mediasearch
POSTGRES_PASSWORD=mediasearch

# Redis (local stand-in for queue)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# MinIO (local stand-in for VAST S3)
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false

# =============================================================================
# Media Storage
# =============================================================================
# Bucket for media files
MEDIA_BUCKET=media

# =============================================================================
# ASR (Automatic Speech Recognition) Configuration
# =============================================================================
# Engine: nvidia_nims (default), whisper, byo, stub
ASR_ENGINE=stub

# NVIDIA NIMs endpoint (when ASR_ENGINE=nvidia_nims)
NVIDIA_NIMS_ENDPOINT=http://your-nims-server:8000
NVIDIA_NIMS_API_KEY=

# Whisper endpoint (when ASR_ENGINE=whisper)
WHISPER_ENDPOINT=http://your-whisper-server:9000
WHISPER_MODEL=base

# Prefer GPU execution
ASR_PREFER_GPU=true

# Enable speaker diarization (default: true)
ASR_DIARIZATION=true

# Compute threshold for chunking fallback (seconds)
ASR_COMPUTE_THRESHOLD_SECONDS=300

# =============================================================================
# Embedding Configuration
# =============================================================================
# Model name
EMBEDDING_MODEL=stub

# Vector dimension
EMBEDDING_DIMENSION=384

# Embedding service endpoint (for remote embedding services)
EMBEDDING_ENDPOINT=
EMBEDDING_API_KEY=

# Use stub embeddings for development
EMBEDDING_USE_STUB=true

# =============================================================================
# Processing Configuration
# =============================================================================
# Maximum retry attempts before DLQ
MAX_RETRY_ATTEMPTS=5

# Base retry delay in milliseconds
BASE_RETRY_DELAY_MS=1000

# Maximum retry delay in milliseconds
MAX_RETRY_DELAY_MS=300000

# Job timeout in milliseconds
JOB_TIMEOUT_MS=600000

# Job processing concurrency
JOB_CONCURRENCY=4

# Archive retention period in days
ARCHIVE_RETENTION_DAYS=30

# DLQ processing interval in milliseconds
DLQ_PROCESSING_INTERVAL_MS=60000

# Enable semantic search (embeddings)
SEMANTIC_SEARCH_ENABLED=true

# Enable hybrid search
HYBRID_SEARCH_ENABLED=false

# =============================================================================
# Search Configuration
# =============================================================================
# Default result limit
SEARCH_DEFAULT_LIMIT=20

# Maximum result limit
SEARCH_MAX_LIMIT=100

# Hybrid search weights
HYBRID_KEYWORD_WEIGHT=0.5
HYBRID_SEMANTIC_WEIGHT=0.5

# =============================================================================
# Service Ports
# =============================================================================
INGEST_PORT=3000
SEARCH_API_PORT=3001
TRIAGE_PORT=3002
